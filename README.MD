# Enterprise Challenge â€“ Sprint 3 â€“ Reply

**Projeto:** Enterprise Challenge - Sprint 3 - Reply  
**Resumo:** RepositÃ³rio com modelagem de banco de dados (Oracle 12cR2), pipeline de ML para leituras de sensores (`pipeline_sensor5.py`) e scripts de apoio para ingestÃ£o, explicaÃ§Ãµes SHAP e avaliaÃ§Ã£o contÃ­nua. Este README reÃºne a documentaÃ§Ã£o executiva e tÃ©cnica: modelagem do BD, implementaÃ§Ã£o do ML e principais resultados.

---

## ðŸ§­ 1 â€” Como o banco de dados foi modelado

# ðŸ“Š Modelagem de Banco de Dados â€” CenÃ¡rio Industrial

> **Projeto acadÃªmico/industrial** voltado para registro de **mÃ¡quinas autÃ´nomas**, suas **leituras de sensores** e o **histÃ³rico de manutenÃ§Ãµes** realizadas.  
> Desenvolvido em **Oracle SQL Developer Data Modeler (v. 24.x)**, com base no **RDBMS Oracle 12cR2**.

---

## ðŸŽ¯ Objetivo

Modelar um banco de dados que garanta **integridade, rastreabilidade e qualidade dos dados**, contemplando:

- Cadastro de mÃ¡quinas autÃ´nomas.
- Leituras periÃ³dicas de sensores.
- Registro de funcionÃ¡rios responsÃ¡veis.
- HistÃ³rico completo de manutenÃ§Ãµes.

---

## ðŸ› ï¸ Ferramentas e Tecnologias

- **Oracle SQL Developer Data Modeler** (v. 24.x)  
- **Oracle Database 12cR2**  
- **ExportaÃ§Ã£o DER** em imagem PNG (300â€“400 DPI)  
- **DDL gerado** com PKs, FKs, CHECKs e Ã­ndices.  

---

## ðŸ“ Processo de Desenvolvimento

1. CriaÃ§Ã£o das entidades e atributos com PK/FK.  
2. DefiniÃ§Ã£o de restriÃ§Ãµes (NOT NULL, CHECK, DEFAULT, etc.).  
3. ImportaÃ§Ã£o e comparaÃ§Ã£o de modelos (DDL â†’ Model).  
4. OrganizaÃ§Ã£o do layout e criaÃ§Ã£o de SubView.  
5. ExportaÃ§Ã£o do **DER em PNG**.  

---

## ðŸ—‚ï¸ Entidades e Principais Atributos

### ðŸ­ `MAQUINA_AUTONOMA`
- **ID_MAQUINA (PK)** â€” identity.  
- **MODELO** â€” varchar(50), obrigatÃ³rio.  
- **TIPO** â€” solda, corte, montagem, pintura.  
- **DATA_INSTALACAO** â€” obrigatÃ³rio, default `SYSDATE`.  
- **ULTIMA_MANUTENCAO** â€” opcional.  

---

### ðŸ‘· `FUNCIONARIO`
- **ID_FUNCIONARIO (PK)** â€” identity.  
- **NOME** â€” varchar(100).  
- **DATA_NASCIMENTO**, **IDADE**.  
- **SALARIO** â€” mÃ­nimo R$ 1.518,00.  
- **CARGO** â€” varchar(50).  

---

### ðŸ“¡ `LEITURA_SENSORES`
- **ID_LEITURA_SENSORES (PK)** â€” identity.  
- **ID_MAQUINA** â€” pode ser nulo (leituras de teste).  
- **VIBRACAO** (0â€“100 %).  
- **TEMPERATURA** (-50 a 150 Â°C).  
- **VELOCIDADE_MOTOR** (0â€“10000 RPM).  
- **DIAS_ULTIMA_MANUTENCAO** â‰¥ 0.  
- **FALHA** â€” 0 = nÃ£o, 1 = sim.  

---

### ðŸ› ï¸ `MANUTENCAO`
- **ID_MANUTENCAO (PK)** â€” identity.  
- **DATA_MANUTENCAO** â€” obrigatÃ³ria.  
- **ID_MAQUINA** â€” obrigatÃ³ria (FK).  
- **ID_FUNCIONARIO** â€” obrigatÃ³ria (FK).  

---

## ðŸ”— Relacionamentos

- **MAQUINA_AUTONOMA (1) â†’ (N) LEITURA_SENSORES**  
- **MAQUINA_AUTONOMA (1) â†’ (N) MANUTENCAO**  
- **FUNCIONARIO (1) â†’ (N) MANUTENCAO**  

> ObservaÃ§Ã£o: FKs nÃ£o possuem `ON DELETE`, garantindo consistÃªncia via `RESTRICT/NO ACTION`.

---

## ðŸ›¡ï¸ Regras de Integridade

âœ” **Entidade** â†’ PK com `IDENTITY`.  
âœ” **Referencial** â†’ FKs obrigatÃ³rias (exceto `ID_MAQUINA` em `LEITURA_SENSORES`).  
âœ” **DomÃ­nio** â†’ CHECK constraints (faixas de temperatura, vibraÃ§Ã£o, salÃ¡rio, etc.).  
âœ” **Nulidade** â†’ colunas obrigatÃ³rias marcadas como `NOT NULL`.  

---

## âš™ï¸ Exemplos de InteraÃ§Ã£o

- Cadastro de mÃ¡quina â†’ gera `ID_MAQUINA` automÃ¡tico.  
- Registro de leitura â†’ pode estar vinculada a mÃ¡quina ou nÃ£o.  
- Abertura de manutenÃ§Ã£o â†’ exige mÃ¡quina + funcionÃ¡rio vÃ¡lidos.  

---der

## ðŸ“Š DER â€” Diagrama Entidade Relacionamento

ðŸ“Œ *Inserir aqui a imagem exportada do Oracle SQL Developer Data Modeler*  
*(Exemplo de placeholder abaixo)*  

![DER Exemplo](./saida/figs/der1.png)

![DER Exemplo](./saida/figs/der2.png)

---

## ðŸ’¾ Script DDL (Oracle 12cR2)


-- CriaÃ§Ã£o da tabela MAQUINA_AUTONOMA
CREATE TABLE MAQUINA_AUTONOMA (
  ID_MAQUINA         NUMBER GENERATED ALWAYS AS IDENTITY,
  MODELO             VARCHAR2(50) NOT NULL,
  TIPO               VARCHAR2(50) NOT NULL,
  DATA_INSTALACAO    DATE DEFAULT SYSDATE NOT NULL,
  ULTIMA_MANUTENCAO  DATE,
  CONSTRAINT PK_MAQUINA_AUTONOMA PRIMARY KEY (ID_MAQUINA),
  CONSTRAINT CHK_MAQUINA_TIPO CHECK (TIPO IN ('Solda','Corte','Montagem','Pintura'))
);

-- (... demais tabelas abaixo ...)
# ðŸ“Š Machine Learning Pipeline â€” `pipeline_sensor5.py`

Este repositÃ³rio contÃ©m a implementaÃ§Ã£o de um **pipeline completo de prÃ©-processamento, enriquecimento e modelagem de dados de sensores industriais**, com suporte a aprendizado supervisionado (classificaÃ§Ã£o de falhas) e nÃ£o supervisionado (detecÃ§Ã£o de anomalias).

---

## ðŸš€ 2 â€” Como foi feita a implementaÃ§Ã£o do ML

O script `pipeline_sensor5.py` recebe como entrada um **CSV com leituras de sensores** (mais arquivos opcionais: mÃ¡quinas, funcionÃ¡rios, manutenÃ§Ã£o) e gera:

- âœ… `dados_sensores_clean.csv` â†’ dataset limpo e enriquecido.
- âœ… `metricas_classificacao.csv` â†’ mÃ©tricas de classificaÃ§Ã£o (se houver coluna *falha*).
- âœ… `dados_sensores_resultados.csv` â†’ resultados com *score de anomalia* e *criticidade*.
- âœ… Figuras opcionais â†’ matriz de confusÃ£o e curva ROC.

TambÃ©m realiza **detecÃ§Ã£o de anomalias via IsolationForest**, classificando leituras em *Baixo / MÃ©dio / Alto / CrÃ­tico*.

---

## ðŸ”„ Fluxograma do Pipeline

Abaixo, a versÃ£o do fluxograma jÃ¡ exportada como imagem **embutida em Base64** (auto-contida, sem dependÃªncias externas):

![Fluxograma](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...SEUPLACEHOLDER...AAAElFTkSuQmCC)

> âš ï¸ Substitua o conteÃºdo entre `data:image/png;base64, ...` pelo base64 real do fluxograma exportado.

---

## ðŸ—‚ï¸ Estrutura do CÃ³digo

1. **Imports & Logging** â†’ `sklearn`, `pandas`, `numpy`, `matplotlib`, `logging`.
2. **Helpers (utils)**
   - `slugify_colname()`, `CANONICAL_MAP`
   - `robust_read_csv()`
   - `map_falha_to_int()`
   - `ensure_dir()`
3. **ValidaÃ§Ã£o & Enriquecimento** â†’ ranges, merges, cÃ¡lculo de `dias_ultima_manutencao`.
4. **Main Flow** â†’ ingestÃ£o, prÃ©-processamento, modelagem, anomalias, salvamento.

---

## âš™ï¸ Passo a Passo TÃ©cnico

1. **Leitura Robusta** â†’ mÃºltiplos encodings.
2. **CanonicalizaÃ§Ã£o de Colunas** â†’ nomes uniformes.
3. **Mapeamento da Coluna Falha** â†’ `{0,1}`.
4. **ValidaÃ§Ã£o de DomÃ­nio** â†’ vibracao, temperatura, velocidade_motor, falha.
5. **ValidaÃ§Ã£o Referencial & Enriquecimento** â†’ join com mÃ¡quinas, manutenÃ§Ã£o, funcionÃ¡rios.
6. **Feature Engineering** â†’ features numÃ©ricas e categÃ³ricas.
7. **Dataset Limpo** â†’ exportado para `dados_sensores_clean.csv`.
8. **Modelagem Supervisionada (quando falha disponÃ­vel)** â†’ RandomForest + mÃ©tricas.
9. **DetecÃ§Ã£o de Anomalias (sempre)** â†’ IsolationForest + criticidade.
10. **ExportaÃ§Ã£o Final** â†’ `dados_sensores_resultados.csv` + figuras.

---

## ðŸ”‘ HiperparÃ¢metros Principais

- **RandomForestClassifier** â†’ `n_estimators=200`, `class_weight="balanced"`
- **Split** â†’ `train_test_split(test_size=0.25, stratify=y)`
- **PrÃ©-processamento** â†’ imputaÃ§Ã£o por mediana/frequÃªncia + StandardScaler + OneHotEncoder
- **IsolationForest** â†’ `n_estimators=200`, `contamination=0.02`
- **Criticidade** â†’ bins `[0,0.75,0.9,0.98,1.0]` â†’ `Baixo/MÃ©dio/Alto/CrÃ­tico`

---

## ðŸ› ï¸ Artefatos Gerados

- `outdir/relatorios/dados_sensores_clean.csv`
- `outdir/relatorios/metricas_classificacao.csv`
- `outdir/relatorios/dados_sensores_resultados.csv`
- `outdir/figs/confusion_matrix.png`
- `outdir/figs/roc_curve.png`

---

## âš ï¸ LimitaÃ§Ãµes

1. **Leakage temporal** â†’ usar split temporal para produÃ§Ã£o.
2. **ContaminaÃ§Ã£o arbitrÃ¡ria** no IsolationForest (ajustar `contamination`).
3. **DesequilÃ­brio de classes** â†’ avaliar tÃ©cnicas adicionais (SMOTE, undersampling).
4. **Modelos globais** â†’ considerar segmentaÃ§Ã£o por mÃ¡quina/tipo.
5. **Escalabilidade** â†’ pipeline atual roda em memÃ³ria (pandas).
6. **Feature engineering limitado** â†’ sem extraÃ§Ã£o temporal/FFT.
7. **Explicabilidade** â†’ considerar SHAP/LIME.

---

## ðŸš€ RecomendaÃ§Ãµes Futuras

- ValidaÃ§Ã£o temporal realista.
- Cross-validation e otimizaÃ§Ã£o de hiperparÃ¢metros.
- PersistÃªncia do modelo (joblib).
- Monitoring de drift/performance.
- Novas features: agregaÃ§Ãµes temporais, FFT de vibraÃ§Ã£o.
- Modelos calibrados e ensemble de detectores de anomalias.
- Registro de experimentos (MLflow, W&B).

---

## ðŸ“Š Exemplos de Campos Importantes

| Campo               | DescriÃ§Ã£o | Exemplo | Uso PrÃ¡tico |
|---------------------|-----------|---------|-------------|
| `id_sensor`         | Identificador Ãºnico do sensor | `SEN_0345` | Auditoria/calibraÃ§Ã£o |
| `id_maquina`        | Identificador da mÃ¡quina | `MAQ_TORNO_07` | Agrupar leituras |
| `ts`                | Timestamp da leitura | `2025-09-07 14:32:10` | SÃ©ries temporais |
| `vibracao`          | NÃ­vel de vibraÃ§Ã£o (0â€“100) | `92` | Indica desgaste |
| `temperatura`       | Temperatura (Â°C) | `105` | Detecta sobrecarga |
| `velocidade_motor`  | RotaÃ§Ã£o (RPM) | `2800` | Contextualiza vibraÃ§Ã£o |
| `dias_ultima_manutencao` | Dias desde a Ãºltima manutenÃ§Ã£o | `200` | Criticidade alta |
| `falha`             | OcorrÃªncia de falha (0/1) | `1` | Alvo supervisado |
| `modelo`            | Modelo da mÃ¡quina | `TX-500` | TolerÃ¢ncias especÃ­ficas |
| `tipo`              | Tipo da mÃ¡quina | `Torno` | SegmentaÃ§Ã£o |
| `anomalia_score`    | Score de anomalia (IForest) | `1.5` | Grau de estranheza |
| `anomalia_rank_pct` | Percentil relativo | `0.995` | Triagem de alertas |
| `criticidade`       | NÃ­vel categÃ³rico | `CrÃ­tico` | Tomada de decisÃ£o |

---

## â–¶ï¸ Como Executar

```bash
# Instalar dependÃªncias
pip install pandas numpy scikit-learn matplotlib

# Executar pipeline
python pipeline_sensor5.py \
    --csv dados_sensores.csv \
    --maquinas maquinas.csv \
    --funcionarios funcionarios.csv \
    --manutencao manutencao.csv \
    --outdir saida

# Executar dashboard interativo
streamlit run dashboard_avancado.py
```

SaÃ­das principais:
- `saida/relatorios/dados_sensores_clean.csv`
- `saida/relatorios/metricas_classificacao.csv`
- `saida/relatorios/dados_sensores_resultados.csv`
- `saida/figs/`

![DASBOARD](./saida/figs/Dash_Fase_5.png)

---


---

## ðŸ“‘ DescriÃ§Ã£o TÃ©cnica dos Campos (com Exemplos e MÃ©tricas)

### 1. `id_sensor`
- **DescriÃ§Ã£o:** Identificador Ãºnico do sensor que gerou a leitura.  
- **RelevÃ¢ncia:** Permite rastrear qual dispositivo fÃ­sico originou a mediÃ§Ã£o. Essencial para auditoria, calibraÃ§Ã£o e manutenÃ§Ã£o de sensores especÃ­ficos.  
- **Exemplos:** `SEN_0345`, `SEN_1012`.  
- **Uso prÃ¡tico:** facilita a investigaÃ§Ã£o quando um sensor apresenta leituras anÃ´malas repetidas.

### 2. `id_maquina`
- **DescriÃ§Ã£o:** Identificador Ãºnico da mÃ¡quina em que o sensor estÃ¡ instalado.  
- **RelevÃ¢ncia:** Fundamental para cruzar leituras de sensores com dados cadastrais (modelo, tipo, Ãºltima manutenÃ§Ã£o).  
- **Exemplos:** `MAQ_TORNO_07`, `MAQ_INJ_22`.  
- **Uso prÃ¡tico:** agrupa leituras e ajuda a identificar mÃ¡quinas com maior risco de falha.

### 3. `ts` (timestamp)
- **DescriÃ§Ã£o:** Data e hora da leitura do sensor.  
- **RelevÃ¢ncia:** Base para anÃ¡lises temporais, como sÃ©ries histÃ³ricas, sazonalidade e detecÃ§Ã£o de falhas ao longo do tempo.  
- **Exemplo:** `2025-09-07 14:32:10`.  
- **Uso prÃ¡tico:** anÃ¡lises de evoluÃ§Ã£o gradual, como aumento de vibraÃ§Ã£o em dias consecutivos.

### 4. `vibracao` (0â€“100)
- **DescriÃ§Ã£o:** NÃ­vel de vibraÃ§Ã£o detectado pelo sensor.  
- **RelevÃ¢ncia:** Alta vibraÃ§Ã£o indica desgaste de rolamentos, desbalanceamento ou desalinhamento.  
- **Faixas tÃ­picas:** Normal: 15â€“30 | MÃ©dio risco: 40â€“60 | CrÃ­tico: >80  
- **Uso prÃ¡tico:** leitura `92` â†’ `anomalia_rank_pct 0.985` â†’ `criticidade CrÃ­tico`.

### 5. `temperatura` (Â°C)
- **DescriÃ§Ã£o:** Temperatura medida na mÃ¡quina.  
- **RelevÃ¢ncia:** Excesso de temperatura pode apontar sobrecarga, falha de lubrificaÃ§Ã£o ou refrigeraÃ§Ã£o.  
- **Faixas tÃ­picas:** Normal: 40â€“70 Â°C | Alerta: 75â€“90 Â°C | CrÃ­tico: >95 Â°C  
- **Uso prÃ¡tico:** temperatura `105 Â°C` classifica leitura como **CrÃ­tico**, mesmo sem falha registrada.

### 6. `velocidade_motor` (RPM)
- **DescriÃ§Ã£o:** RotaÃ§Ã£o do motor.  
- **RelevÃ¢ncia:** Contextualiza outras mediÃ§Ãµes (ex.: vibraÃ§Ã£o alta pode ser esperada em rotaÃ§Ã£o alta).  
- **Faixas tÃ­picas:** OperaÃ§Ã£o normal: 1500â€“3000 RPM | AnÃ´malo: 5000 RPM sem justificativa  
- **Uso prÃ¡tico:** vibraÃ§Ã£o `70` em `2800 RPM` pode ser aceitÃ¡vel; a mesma vibraÃ§Ã£o em `1500 RPM` indica falha.

### 7. `dias_ultima_manutencao`
- **DescriÃ§Ã£o:** Dias desde a Ãºltima manutenÃ§Ã£o preventiva.  
- **RelevÃ¢ncia:** VariÃ¡vel-chave na manutenÃ§Ã£o preditiva.  
- **Faixas tÃ­picas:** Normal: 10â€“60 dias | MÃ©dio risco: >120 dias | CrÃ­tico: >180 dias  
- **Uso prÃ¡tico:** `200 dias` sem manutenÃ§Ã£o â†’ forte indÃ­cio de **criticidade alta**.

### 8. `falha` (0/1)
- **DescriÃ§Ã£o:** Registro binÃ¡rio da ocorrÃªncia de falha.  
- **RelevÃ¢ncia:** VariÃ¡vel alvo para modelos supervisionados.  
- **Exemplos:** `0 = normal`, `1 = rolamento travado`.  
- **Uso prÃ¡tico:** permite treinar modelos de previsÃ£o de falha.

### 9. `modelo`
- **DescriÃ§Ã£o:** Modelo da mÃ¡quina.  
- **RelevÃ¢ncia:** Cada modelo possui tolerÃ¢ncias especÃ­ficas.  
- **Exemplos:** `TX-500`, `MEC-12`, `INJ-3000`.  
- **Uso prÃ¡tico:** vibraÃ§Ã£o `50` pode ser normal para `INJ-3000`, mas anÃ´mala para `TX-500`.

### 10. `tipo`
- **DescriÃ§Ã£o:** Tipo da mÃ¡quina (torno, fresa, injetora).  
- **RelevÃ¢ncia:** Diferentes tipos apresentam padrÃµes distintos de desgaste.  
- **Exemplo:** `Torno`, `Fresa`, `Injetora`.  
- **Uso prÃ¡tico:** anÃ¡lises segmentadas por categoria.

### 11. `ultima_manutencao`
- **DescriÃ§Ã£o:** Data da Ãºltima manutenÃ§Ã£o.  
- **RelevÃ¢ncia:** Usada para calcular `dias_ultima_manutencao`.  
- **Exemplo:** `2025-06-15`.  
- **Uso prÃ¡tico:** valida periodicidade das intervenÃ§Ãµes.

### 12. `cargo`
- **DescriÃ§Ã£o:** Cargo do responsÃ¡vel pela Ãºltima manutenÃ§Ã£o.  
- **RelevÃ¢ncia:** Pode indicar impacto da qualificaÃ§Ã£o na eficÃ¡cia da intervenÃ§Ã£o.  
- **Exemplo:** TÃ©cnico, Engenheiro, Operador.  
- **Uso prÃ¡tico:** estatÃ­sticas mostram menor reincidÃªncia de falhas em manutenÃ§Ãµes feitas por engenheiros.

### 13. `idade`
- **DescriÃ§Ã£o:** Idade do funcionÃ¡rio responsÃ¡vel.  
- **RelevÃ¢ncia:** Proxy para experiÃªncia.  
- **Exemplo:** 28, 45, 52.  
- **Uso prÃ¡tico:** anÃ¡lises podem sugerir que maior experiÃªncia correlaciona com intervenÃ§Ãµes mais eficazes.

### 14. `anomalia_score`
- **DescriÃ§Ã£o:** PontuaÃ§Ã£o calculada pelo IsolationForest, representando o grau de â€œestranhezaâ€.  
- **RelevÃ¢ncia:** Detecta desvios em relaÃ§Ã£o ao padrÃ£o.  
- **Exemplo:** Normal: 0.25 | Suspeito: 0.7 | Muito anÃ´malo: 1.5  
- **Uso prÃ¡tico:** leituras acima de `1.2` geralmente estÃ£o entre as mais crÃ­ticas.

### 15. `anomalia_rank_pct` (0â€“1)
- **DescriÃ§Ã£o:** Percentil da anomalia em relaÃ§Ã£o a todas as leituras.  
- **RelevÃ¢ncia:** Prioriza casos mais suspeitos.  
- **Exemplos:** `0.30` â†’ leitura comum | `0.88` â†’ top 12% mais anÃ´malo | `0.995` â†’ top 0,5% mais anÃ´malo  
- **Uso prÃ¡tico:** ajuda na triagem de alertas em grande volume de dados.

### 16. `criticidade`
- **DescriÃ§Ã£o:** ClassificaÃ§Ã£o categÃ³rica derivada de `anomalia_rank_pct`.  
- **Faixas tÃ­picas:** Baixo: â‰¤ 75% | MÃ©dio: 75%â€“90% | Alto: 90%â€“98% | CrÃ­tico: >98%  
- **Exemplos:**  
  - **Baixo:** vibraÃ§Ã£o 20, temperatura 60 Â°C  
  - **MÃ©dio:** vibraÃ§Ã£o 55, temperatura 80 Â°C, 120 dias sem manutenÃ§Ã£o  
  - **Alto:** vibraÃ§Ã£o 75, temperatura 92 Â°C, 150 dias sem manutenÃ§Ã£o  
  - **CrÃ­tico:** vibraÃ§Ã£o 95, temperatura 105 Â°C, 200 dias sem manutenÃ§Ã£o  
- **Uso prÃ¡tico:** fornece mÃ©trica de risco compreensÃ­vel para gestores e tÃ©cnicos.

---

---



![Status](https://img.shields.io/badge/status-completed-brightgreen)
![Python](https://img.shields.io/badge/python-3.10%2B-blue)
![ML](https://img.shields.io/badge/ML-IsolationForest%2FRF-orange)
![Dashboard](https://img.shields.io/badge/Dashboard-Streamlit-success)

---

## ðŸ“Œ Principais Resultados Obtidos

Este repositÃ³rio documenta os **resultados do projeto** envolvendo:

- `pipeline_sensor5.py` â†’ ResponsÃ¡vel por **ETL, enriquecimento, Machine Learning e detecÃ§Ã£o de anomalias**.  
- `dashboard_avancado.py` â†’ Dashboard interativo para exploraÃ§Ã£o e anÃ¡lise dos resultados.

As observaÃ§Ãµes combinam:  
âœ… O comportamento e artefatos do pipeline  
âœ… VisualizaÃ§Ãµes e insights do dashboard  
âœ… VerificaÃ§Ãµes e correÃ§Ãµes durante o trabalho (ex.: correÃ§Ã£o de `dias_ultima_manutencao`).

---

## âš™ï¸ 1) Artefatos e EntregÃ¡veis

| Artefato | Origem | DescriÃ§Ã£o |
|----------|--------|-----------|
| `dados_sensores_clean.csv` | pipeline_sensor5 | Dados limpos, enriquecidos com mÃ¡quinas, manutenÃ§Ãµes e funcionÃ¡rios |
| `dados_sensores_resultados.csv` | pipeline_sensor5 | Dataset final com features, falha, anomalia_score, rank_pct, criticidade |
| `metricas_classificacao.csv` | pipeline_sensor5 | MÃ©tricas de classificaÃ§Ã£o supervisionada (precisÃ£o, recall, F1) |
| `figs/` | pipeline_sensor5 | GrÃ¡ficos opcionais (matriz de confusÃ£o, curva ROC) |
| `dashboard_avancado.py` | dashboard_avancado | Dashboard interativo com KPIs, filtros, sÃ©ries temporais e anÃ¡lises |

---

## ðŸ“Š 2) Resultados Quantitativos e Indicadores

### ðŸ”¹ 2.1 MÃ©tricas Gerais
- **Taxa de falhas**: ~11.81% â†’ baseline inicial (~1 em cada 9 leituras foi falha).  
- **Criticidade dominante**: Baixo â†’ maioria das leituras nÃ£o crÃ­ticas.  
- **Tempo mÃ©dio desde manutenÃ§Ã£o**: -1.0 dias â†’ âš ï¸ InconsistÃªncia a revisar (timestamp/manutenÃ§Ã£o).  
- **Exemplo de mÃ©trica de modelo**: Precision/Recall ~0.83.

### ðŸ”¹ 2.2 DetecÃ§Ã£o de Anomalias
- **Modelo**: IsolationForest aplicado em vibraÃ§Ã£o, temperatura, RPM e dias desde manutenÃ§Ã£o.  
- **Criticidade (faixas)**:  
  - Baixo: â‰¤ 75%  
  - MÃ©dio: 75â€“90%  
  - Alto: 90â€“98%  
  - CrÃ­tico: > 98%  

DistribuiÃ§Ã£o tÃ­pica: cauda longa em `anomalia_score`, confirmando presenÃ§a de outliers.

### ðŸ”¹ 2.3 MÃ¡quinas CrÃ­ticas
- Ranking das Top-5 mÃ¡quinas com maior `anomalia_score`.  
- Indicadores mostraram mÃ¡quinas com mÃ©dias elevadas de vibraÃ§Ã£o/temperatura e % de falhas maiores.

### ðŸ”¹ 2.4 Insights Relevantes
- **Dias sem manutenÃ§Ã£o Ã— Falha** â†’ maior risco quando intervalo cresce.  
- **VibraÃ§Ã£o/Temperatura Ã— Falha** â†’ forte correlaÃ§Ã£o observada em sÃ©ries temporais.  
- **Impacto humano** â†’ reincidÃªncia pode variar por cargo/idade do responsÃ¡vel.

---

## ðŸ› ï¸ 3) Qualidade dos Dados e Problemas
- âŒ **Dias negativos desde manutenÃ§Ã£o** â†’ inconsistÃªncia nos dados.  
- âš–ï¸ **Class imbalance** â†’ falhas sÃ£o minoritÃ¡rias; requer tÃ©cnicas adicionais.  
- â³ **Escopo limitado** â†’ resultados vÃ¡lidos apenas para dataset testado.  

---

## âœ… 4) Robustez Comprovada
- Leitura robusta de mÃºltiplos CSVs (encodings diversos).  
- ValidaÃ§Ã£o referencial de `id_maquina`.  
- Enriquecimento com Ãºltima manutenÃ§Ã£o e responsÃ¡vel.  
- Dashboard interativo com filtros, drill-down, KPIs e export.  

---

## âš ï¸ 5) LimitaÃ§Ãµes
1. ValidaÃ§Ã£o temporal insuficiente (risco de data leakage).  
2. `contamination=0.02` no IsolationForest fixo.  
3. Escalabilidade limitada (pandas in-memory).  
4. Problemas de integridade em timestamps.  
5. Explicabilidade ausente (sem SHAP/LIME).  

---

## ðŸŽ¯ 6) ConclusÃ£o Executiva
- âœ… ConstruÃ§Ã£o de pipeline completo (ETL â†’ ML â†’ anomalias).  
- âœ… Dashboard avanÃ§ado com anÃ¡lises acionÃ¡veis.  
- âœ… IdentificaÃ§Ã£o de pontos crÃ­ticos (dados inconsistentes, validaÃ§Ã£o temporal).  

---

## ðŸ”„ Fluxo do Pipeline

```mermaid
flowchart TD
    A[IngestÃ£o CSVs] --> B[Limpeza & CanonicalizaÃ§Ã£o]
    B --> C[Enriquecimento com mÃ¡quinas/manutenÃ§Ãµes/funcionÃ¡rios]
    C --> D[ML Supervisionado - RandomForest]
    C --> E[DetecÃ§Ã£o de Anomalias - IsolationForest]
    D --> F[Resultados + MÃ©tricas]
    E --> F[Resultados + Criticidade]
    F --> G[Export CSVs + GrÃ¡ficos]
    G --> H[Dashboard AvanÃ§ado]
	
	## ðŸ”„ Estrutura do RepositÃ³rio
	.
â”œâ”€â”€ pipeline_sensor5.py
â”œâ”€â”€ dashboard_avancado.py
â”œâ”€â”€ dados_sensores_clean.csv
â”œâ”€â”€ dados_sensores_resultados.csv
â”œâ”€â”€ metricas_classificacao.csv
â”œâ”€â”€ figs/
â””â”€â”€ README.md

